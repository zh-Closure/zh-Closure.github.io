<!DOCTYPE html>
<html lang="zh-CN" color-mode="light">

  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="keywords" content="" />
  <meta name="author" content="Closure" />
  <meta name="description" content="" />
  <meta name="google-site-verification" content="ume8wxFIzFnN-uS2NK6TLbEnB0OL8U3QYLpG-0v0NPM" />
  
  
  <title>
    
      GNU Radio 
      
      
      |
    
     Closure
  </title>

  
    <link rel="apple-touch-icon" href="/images/favicon.png">
    <link rel="icon" href="/images/favicon.png">
  

  <!-- Raleway-Font -->
  <link href="https://fonts.googleapis.com/css?family=Raleway&display=swap" rel="stylesheet">

  <!-- hexo site css -->
  <link rel="stylesheet" href="/css/main.css" />
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1886449_67xjft27j1l.css" />
  <!-- 代码块风格 -->
  

  <!-- jquery3.3.1 -->
  
    <script defer type="text/javascript" src="/plugins/jquery.min.js"></script>
  

  <!-- fancybox -->
  
    <link href="/plugins/jquery.fancybox.min.css" rel="stylesheet">
    <script defer type="text/javascript" src="/plugins/jquery.fancybox.min.js"></script>
  
  
<script src="/js/fancybox.js"></script>


  

  
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  <script>
    var html = document.documentElement
    const colorMode = localStorage.getItem('color-mode')
    if (colorMode) {
      document.documentElement.setAttribute('color-mode', colorMode)
    }
  </script>
<meta name="generator" content="Hexo 6.3.0"></head>


  <body>
    <div id="app">
      <div class="header">
  <div class="avatar">
    <a href="/">
      <!-- 头像取消懒加载，添加no-lazy -->
      
        <img src="/images/avatar.png" alt="">
      
    </a>
    <div class="nickname"><a href="/">Closure</a></div>
  </div>
  <div class="navbar">
    <ul>
      
        <li class="nav-item" data-path="/">
          <a href="/">主页</a>
        </li>
      
        <li class="nav-item" data-path="/archives/">
          <a href="/archives/">归档</a>
        </li>
      
        <li class="nav-item" data-path="/tags/">
          <a href="/tags/">Tags</a>
        </li>
      
        <li class="nav-item" data-path="/friends/">
          <a href="/friends/">Friends</a>
        </li>
      
        <li class="nav-item" data-path="/about/">
          <a href="/about/">关于我</a>
        </li>
      
    </ul>
  </div>
</div>


<script src="/js/activeNav.js"></script>



      <div class="flex-container">
        <!-- 文章详情页，展示文章具体内容，url形式：https://yoursite/文章标题/ -->
<!-- 同时为「标签tag」，「朋友friend」，「分类categories」，「关于about」页面的承载页面，具体展示取决于page.type -->


  <!-- LaTex Display -->

  
    <script async type="text/javascript" src="/plugins/mathjax/tex-chtml.js"></script>
  
  <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      }
    }
  </script>





  <!-- clipboard -->

  
    <script async type="text/javascript" src="/plugins/clipboard.min.js"></script>
  
  
<script src="/js/codeCopy.js"></script>







  

  

  

  
  <!-- 文章内容页 url形式：https://yoursite/文章标题/ -->
  <div class="container post-details" id="post-details">
    <div class="post-content">
      <div class="post-title">GNU Radio</div>
      <div class="post-attach">
        <span class="post-pubtime">
          <i class="iconfont icon-updatetime mr-10" title="更新时间"></i>
          2025-01-31 19:47:13
        </span>
        
              <span class="post-tags">
                <i class="iconfont icon-tags mr-10" title="标签"></i>
                
                <span class="span--tag mr-8">
                  <a href="/tags/%E6%97%A0%E7%BA%BF%E7%94%B5/" title="无线电">
                    #无线电
                  </a>
                </span>
                
              </span>
          
      </div>
      <div class="markdown-body">
        <h1 id="GNU-Radio"><a href="#GNU-Radio" class="headerlink" title="GNU Radio"></a>GNU Radio</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>GNU Radio 是一款免费的开源软件开发工具包，提供信号处理模块来实现软件无线电。它可与现成的低成本外部 RF 硬件一起使用，以创建软件定义的无线电，或者在类似模拟的环境中不使用硬件。它广泛用于研究、工业、学术界、政府和业余爱好者环境，以支持无线通信研究和现实世界的无线电系统。<br>GNU Radio 是一个框架，它使用户能够设计、模拟和部署功能强大的现实世界无线电系统。它是一个高度模块化、面向“流程图”的框架，带有一个全面的处理块库，可以轻松组合以制作复杂的信号处理应用程序。GNU Radio 已用于大量现实世界的无线电应用，包括音频处理、移动通信、跟踪卫星、雷达系统、GSM 网络、Digital Radio Mondiale 等等 - 全部以计算机软件实现。它本身并不是与任何特定硬件对话的解决方案。它也没有为特定无线电通信标准（例如 802.11、ZigBee、LTE 等）提供现成的应用程序，但它可以（并且已经）用于开发基本上任何带宽受限通信标准的实现。<br>以前，在开发无线电通信设备时，工程师必须开发用于检测特定信号类别的专用电路，设计能够解码或编码特定传输的专用集成电路，并使用昂贵的设备对其进行调试。</p>
<p>软件定义无线电 (SDR) 采用模拟信号处理，并在物理和经济可行的范围内，使用软件算法在计算机上处理无线电信号。</p>
<p>基础使用：</p>
<p>官方教学WIKI</p>
<pre class="language-none"><code class="language-none">https:&#x2F;&#x2F;wiki.gnuradio.org&#x2F;index.php&#x2F;Tutorials</code></pre>

<p>界面预览：</p>
<p><img src="https://raw.githubusercontent.com/zh-Closure/images/main/202411212325505.png" alt="image-20241121232515302"></p>
<p>将右边的block拖放至左边即可</p>
<p>常用block：</p>
<ul>
<li><p><strong>source（信号源模块）</strong>：接收输入信号或数据</p>
<p><strong>File Source</strong>：从文件中读取数据。</p>
<ul>
<li>用途：读取存储在磁盘上的数据。</li>
<li>示例：读取音频文件、信号文件等。</li>
</ul>
<p><strong>Signal Source</strong>：生成特定的信号（如正弦波、方波等）。</p>
<ul>
<li>用途：用于信号的生成，比如生成正弦波信号。</li>
<li>示例：<code>Signal Source</code> 生成一个频率为 1 kHz 的正弦波。</li>
</ul>
<p><strong>HackRF Source</strong>：从 HackRF SDR 硬件接收信号。</p>
<ul>
<li>用途：从硬件接收无线电信号。</li>
<li>示例：用于接收 FM 信号或其他无线电频段信号。</li>
</ul>
<p><strong>USRP Source</strong>：通过 USRP（Universal Software Radio Peripheral）硬件接收信号。</p>
<ul>
<li><p>用途：从 USRP 硬件接收信号。</p>
</li>
<li><p>示例：用于接收无线电通信信号。</p>
</li>
</ul>
</li>
<li><p><strong>sink（接收端模块）</strong>：发送输出信号或数据</p>
<p><strong>File Sink</strong>：将数据写入文件。</p>
<ul>
<li>用途：将接收到的数据保存到磁盘文件中。</li>
<li>示例：保存接收到的信号数据到 <code>.dat</code> 文件。</li>
</ul>
<p><strong>Audio Sink</strong>：将数据输出到计算机音频设备。</p>
<ul>
<li>用途：将解调后的信号（如音频）传输到计算机扬声器。</li>
<li>示例：用于 FM 收音机将解调后的音频信号播放出来。</li>
</ul>
<p><strong>Null Sink</strong>：丢弃数据，不进行处理。</p>
<ul>
<li>用途：用于测试时忽略输出数据。</li>
</ul>
</li>
<li><p><strong>Signal Processing（信号处理模块）</strong>：对信号进行处理、分析、转换等</p>
<p><strong>Add</strong>：两个信号相加。</p>
<ul>
<li>用途：用于信号合成，例如多载波合成或调制。</li>
</ul>
<p><strong>Multiply</strong>：两个信号相乘。</p>
<ul>
<li>用途：用于调制解调过程中的乘法操作。</li>
</ul>
<p><strong>Low Pass Filter</strong>：低通滤波器。</p>
<ul>
<li>用途：滤除高频噪声，仅保留低频信号。常用于接收无线电信号时的信号处理。</li>
</ul>
<p><strong>High Pass Filter</strong>：高通滤波器。</p>
<ul>
<li>用途：去除低频噪声或直流分量，仅保留高频信号。</li>
</ul>
<p><strong>Band Pass Filter</strong>：带通滤波器。</p>
<ul>
<li>用途：仅保留特定频段内的信号，常用于接收特定频率范围的无线电信号。</li>
</ul>
<p><strong>Delay</strong>：对信号进行延迟。</p>
<ul>
<li>用途：模拟延迟或处理时延。</li>
</ul>
<p><strong>Complex to Mag</strong>：将复数信号转换为幅度（忽略相位）。</p>
<ul>
<li>用途：将复数信号（如 IQ 信号）转换为幅度信号。</li>
</ul>
<p><strong>Complex to Real</strong>：将复数信号转换为实部。</p>
<ul>
<li>用途：仅获取复数信号的实部。</li>
</ul>
</li>
<li><p><strong>Modulation &#x2F; Demodulation（调制解调模块）</strong>：进行信号的调制或解调</p>
<p><strong>WBFM Receive</strong>：宽带 FM 解调器。</p>
<ul>
<li>用途：用于接收和解调宽带 FM 信号。</li>
<li>示例：用于将 FM 信号转换为音频信号。</li>
</ul>
<p><strong>AM Demod</strong>：调幅（AM）解调器。</p>
<ul>
<li>用途：用于接收并解调调幅信号。</li>
</ul>
<p><strong>PSK Mod</strong>：相位移键控（PSK）调制。</p>
<ul>
<li>用途：将数据调制为 PSK 信号。</li>
</ul>
<p><strong>QAM Mod</strong>：正交振幅调制（QAM）。</p>
<ul>
<li>用途：将数据调制为 QAM 信号，广泛用于无线通信。</li>
</ul>
<p><strong>Frequency Mod</strong>：频率调制。</p>
<ul>
<li>用途：用于频率调制（FM）的信号生成。</li>
</ul>
</li>
<li><p><strong>Debugging and Analysis（调试与分析模块）</strong>：</p>
<p><strong>Scope Sink</strong>：波形显示。</p>
<ul>
<li>用途：用于显示信号的时域波形，类似示波器。</li>
</ul>
<p><strong>QT GUI Sink</strong>：GUI 波形显示。</p>
<ul>
<li>用途：在图形界面中显示信号波形或其他图形。</li>
</ul>
<p><strong>Message Debug</strong>：用于打印调试消息。</p>
<ul>
<li>用途：在程序中插入调试信息，帮助分析问题。</li>
</ul>
</li>
<li><p><strong>Control and Data Flow（控制与数据流模块）</strong>：</p>
<p><strong>Throttle</strong>：控制数据流速率。</p>
<ul>
<li>用途：限制数据流速率，防止占用过多计算资源。</li>
</ul>
<p><strong>Variable</strong>：定义变量。</p>
<ul>
<li>用途：在流程中存储和管理变量的值。</li>
</ul>
<p><strong>Connect</strong>：用于连接不同的 Blocks。</p>
<ul>
<li>用途：创建 Blocks 之间的数据流路径。</li>
</ul>
</li>
</ul>
<p><strong>其他 Blocks</strong>：</p>
<ul>
<li>Channel Model：模拟信道的影响（如噪声、衰减等）。</li>
<li>Noise Source：生成噪声信号。</li>
<li>Packet Encoder &#x2F; Decoder：用于数据包编码和解码。</li>
<li>UDP Source &#x2F; Sink：用于通过 UDP 协议发送和接收数据。</li>
</ul>
<p>当然也可以自定义块：python block</p>
<p><img src="https://raw.githubusercontent.com/zh-Closure/images/main/202411262340391.png" alt="image-20241126234016359"></p>
<p>打开代码编辑：</p>
<p><img src="https://raw.githubusercontent.com/zh-Closure/images/main/202411262340323.png" alt="image-20241126234058298"></p>
<p>即可更改代码实现block自定义</p>
<p><img src="https://raw.githubusercontent.com/zh-Closure/images/main/202411262353019.png" alt="image-20241126235342965"></p>
<h2 id="基础小结实验：GNU-Radio-HackRF-实现FM收音机"><a href="#基础小结实验：GNU-Radio-HackRF-实现FM收音机" class="headerlink" title="基础小结实验：GNU Radio + HackRF 实现FM收音机"></a>基础小结实验：GNU Radio + HackRF 实现FM收音机</h2><p>GRC：</p>
<p><img src="https://raw.githubusercontent.com/zh-Closure/images/main/202411262318769.png" alt="image-20241126231853645"></p>
<p>信号源：</p>
<p>Device选择hackrf&#x3D;0 如果插入多个hackrf 可以选择不同的值</p>
<p><img src="https://raw.githubusercontent.com/zh-Closure/images/main/202411262320217.png" alt="image-20241126232001190"></p>
<p>运行效果：</p>
<p><img src="https://raw.githubusercontent.com/zh-Closure/images/main/202411262318201.png" alt="image-20241126231828986"></p>
<h2 id="进阶：ZMQ"><a href="#进阶：ZMQ" class="headerlink" title="进阶：ZMQ"></a>进阶：ZMQ</h2><p>ZeroMQ，可嵌入的网络库，提供进程内、进程间、TCP和多播等各种传输中承载原子消息的socket</p>
<p>ZMQ可以将GNU radio中的实时数据流通过socket引到<strong>外部</strong>的python&#x2F;c等应用程序中</p>
<p>块的类型：</p>
<table>
<thead>
<tr>
<th>SINK</th>
<th>SOURCE</th>
<th>特征</th>
</tr>
</thead>
<tbody><tr>
<td>PUB</td>
<td>SUB</td>
<td>广播，可一对多</td>
</tr>
<tr>
<td>PUSH</td>
<td>PULL</td>
<td>点播，点对点对等网络</td>
</tr>
<tr>
<td>REQ</td>
<td>REP</td>
<td>点对点链路，一个请求一个回复，类似客户端服务器</td>
</tr>
</tbody></table>
<p>Data Blocks：<br>ZMQ data blocks 传输原始流数据；没有格式化。数据类型和采样率由馈送 ZMQSink 的流程图确定。因此，接收数据的流程图或程序必须知道这些参数，以便正确地解释数据。</p>
<p>Message Blocks<br>不像普通的 ZeroMQ 字符串，GNU Radio ZMQ Message Blocks 使用 PMT 对数据进行编码和解码。</p>
<p>ZMQ PUB发送，外部python ZMQ SUB recv DEMO：</p>
<p>GRC：</p>
<p><img src="https://raw.githubusercontent.com/zh-Closure/images/main/202411220009094.png" alt="image-20241122000932047"></p>
<p>python：</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> zmq
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> time
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt

<span class="token comment"># 创建一个 ZeroMQ 上下文，这是使用 ZeroMQ 的必要步骤</span>
context <span class="token operator">=</span> zmq<span class="token punctuation">.</span>Context<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 创建一个 SUB（订阅）套接字，用于接收消息</span>
socket <span class="token operator">=</span> context<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>zmq<span class="token punctuation">.</span>SUB<span class="token punctuation">)</span>

<span class="token comment"># 连接到发布者（PUB）的套接字</span>
<span class="token comment"># PUB 的地址是 "tcp://127.0.0.1:55555"，注意这里使用的是 connect 而不是 bind</span>
<span class="token comment"># 因为在 PUB-SUB 模式中，通常只有一个 PUB 会 bind（绑定）一个端口，而 SUB 使用 connect 来连接到 PUB</span>
socket<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">"tcp://127.0.0.1:55555"</span><span class="token punctuation">)</span> 

<span class="token comment"># 设置订阅选项，这里 `b''` 表示订阅所有的主题</span>
<span class="token comment"># 如果没有设置订阅选项，SUB 是无法接收消息的</span>
socket<span class="token punctuation">.</span>setsockopt<span class="token punctuation">(</span>zmq<span class="token punctuation">.</span>SUBSCRIBE<span class="token punctuation">,</span> <span class="token string">b''</span><span class="token punctuation">)</span>

<span class="token comment"># 进入一个无限循环，用于持续接收数据</span>
<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token comment"># 使用 poll 方法检查套接字上是否有可用的数据，超时时间设置为 10 毫秒</span>
    <span class="token keyword">if</span> socket<span class="token punctuation">.</span>poll<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">:</span>  <span class="token comment"># 如果返回值不为 0，说明有消息可接收</span>
        <span class="token comment"># 接收消息</span>
        msg <span class="token operator">=</span> socket<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 从套接字中获取消息</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 打印消息的长度（字节数）</span>
        
        <span class="token comment"># 将消息数据转换为 numpy 数组</span>
        <span class="token comment"># 数据类型是 complex64，表示复数，`count=-1` 表示读取缓冲区中的所有数据</span>
        <span class="token comment"># 需要确保发送端的数据格式与此处的解析一致</span>
        data <span class="token operator">=</span> np<span class="token punctuation">.</span>frombuffer<span class="token punctuation">(</span>msg<span class="token punctuation">,</span> dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>complex64<span class="token punctuation">,</span> count<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>  
        
        <span class="token comment"># 打印前 10 个数据（复数），用于调试</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        
        <span class="token comment"># 如果需要可视化数据，可以取消以下注释代码块</span>
        <span class="token comment"># 绘制复数部分的实部和虚部</span>
        <span class="token comment"># plt.plot(np.real(data))  # 绘制实部</span>
        <span class="token comment"># plt.plot(np.imag(data))  # 绘制虚部</span>
        <span class="token comment"># plt.show()  # 显示绘图</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token comment"># 如果没有消息，就休眠 100 毫秒，然后重新检查</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">)</span></code></pre>

<p>运行结果</p>
<p><img src="https://raw.githubusercontent.com/zh-Closure/images/main/202411220010484.png" alt="image-20241122001054868"></p>
<h2 id="进阶实验：GNU-Radio-HackRF抓空中BLE通过ZMQ转发"><a href="#进阶实验：GNU-Radio-HackRF抓空中BLE通过ZMQ转发" class="headerlink" title="进阶实验：GNU Radio + HackRF抓空中BLE通过ZMQ转发"></a>进阶实验：GNU Radio + HackRF抓空中BLE通过ZMQ转发</h2><p>参考项目：</p>
<pre class="language-none"><code class="language-none">https:&#x2F;&#x2F;github.com&#x2F;oldprogram&#x2F;sdr4iot-ble-rx</code></pre>

<h3 id="GRC"><a href="#GRC" class="headerlink" title="GRC"></a>GRC</h3><p><img src="https://raw.githubusercontent.com/zh-Closure/images/main/202502100931553.png" alt="image-20250210093151439"></p>
<p>分析各个大模块<strong>作用</strong>：</p>
<ul>
<li>通过 RTL-SDR Source 从 HackRF 设备捕获 BLE 信号。</li>
<li>通过 Simple Squelch 去除无效的噪声信号，确保只有有效信号被传递到下游。</li>
<li>使用 Frequency Xlating FIR Filter 将信号频率转换到基带，为解调做准备。</li>
<li>使用 GFSK Demod 解调 GFSK 信号，恢复出数字数据流。</li>
<li>通过 Unpacked to Packed 转换数据格式。</li>
<li>最后，数据通过 ZMQ PUB Sink 发布到外部</li>
</ul>
<h3 id="详细配置"><a href="#详细配置" class="headerlink" title="详细配置"></a><strong>详细配置</strong></h3><h4 id="RTL-SDR-Sorce"><a href="#RTL-SDR-Sorce" class="headerlink" title="RTL-SDR Sorce"></a>RTL-SDR Sorce</h4><p><img src="https://raw.githubusercontent.com/zh-Closure/images/main/202502111132916.png" alt="image-20250211113204831"></p>
<p>RTL-SDR Sorce 为信号源模块</p>
<p>Device Arguments选择hackrf &#x3D; 0 </p>
<p>由于无需外部时钟与更精确的同步，信号源同步方式Sync选择PC Clock</p>
<p>采样率Sample Rate，即每秒钟采集的样本数。采样率越高，接收到的信号数据就越精细，可以更好地捕捉到高频信号。这个参数直接影响信号的质量与解析精度。对于BLE，通常需要较高的采样率（如 1 MHz 到 10 MHz），以确保捕获到足够的信号细节。此处采样率为10Mhz </p>
<p>Frequency (Hz)，设置信号源的中心频率，表示接收的信号频率范围的中点。BLE信号通常工作在2.4 GHz频段。设置此频率后，RTL-SDR设备会开始接收该频率附近的信号。由于此处接收的为38信道，故设置2.426GHz</p>
<p>RF参数主要决定信号源的采样频率、中心频率等与射频相关的设置。此处设置100</p>
<p>IF设置中频滤波器的带宽，限制接收信号的频率范围，去除不必要的高频噪声或干扰。对于大多数应用，默认值即可。如果信号中有强干扰，可以调整此参数来过滤掉部分干扰频段。此处设置89</p>
<p>BB参数用于设置信号的数字处理部分，负责对接收到的信号进行采样、解调等后续处理。基带参数通常涉及到信号采样后如何对数据进行转换、解调等处理。此处设置为0</p>
<h4 id="Head"><a href="#Head" class="headerlink" title="Head"></a>Head</h4><p>Head 模块用于限制信号流中的样本数，它会根据设置的参数控制信号的流出数量。设置 num items &#x3D; 300M 表示 Head 将从信号源接收并传递 3 亿个数据点（或样本）。<br>这一配置通常用于数据采集和调试阶段，在不需要持续无限制采集的情况下，限制采集的样本数。这可以帮助避免接收过多的数据，从而节省系统资源。</p>
<h4 id="File-Sink"><a href="#File-Sink" class="headerlink" title="File Sink"></a>File Sink</h4><p>File Sink 模块用于将接收到的数据流保存到文件中。它可以将信号流直接写入到磁盘文件。</p>
<h4 id="Simple-Squelch"><a href="#Simple-Squelch" class="headerlink" title="Simple Squelch"></a>Simple Squelch</h4><p>Simple Squelch 模块用于在信号中检测噪声并抑制低于设定阈值的信号（过滤器）。Squelch模块通常在无线电接收器中用于静音处理，避免无用的背景噪声占用接收带宽。它工作原理类似于在接收信号时，如果信号的强度低于设定的阈值，就会屏蔽掉该信号，防止噪声或无效信号被处理。</p>
<p>dB &#x3D; -70：设置为 -70 dB 可以有效过滤掉低于此强度的噪声或无效信号，而通常BLE信号强度在-70 dB以上时为有效信号。<br>Alpha &#x3D; 100 m：设置为 100ms 的较大值，保证了对信号变化的平滑响应，避免信号强度快速波动时频繁切换，这样能够使得系统对环境的动态变化更为适应，同时也减少误判。</p>
<h4 id="Frequency-Xlating-FIR-Filter"><a href="#Frequency-Xlating-FIR-Filter" class="headerlink" title="Frequency Xlating FIR Filter"></a>Frequency Xlating FIR Filter</h4><p>作用：这个模块执行频率偏移和滤波，主要有两个目的：<br>频率移位：通过频率平移（Xlate），将信号频率转换到基带频率或适合解调的频段。对于BLE信号，通常工作在2.4 GHz频段，通过这个模块可以将捕获到的信号移到一个较低的频率范围（例如基带频率）以便于后续处理。<br>滤波：使用 FIR（有限冲击响应）滤波器对信号进行滤波，去除不需要的高频部分和噪声。BLE信号的带宽相对较窄，适当的滤波可以有效地减少干扰，确保接收到的是有效的信号。</p>
<p>如果选择低通滤波器，taps 会指定保留低于某一频率的信号，过滤掉高于该频率的部分。<br>如果选择带通滤波器，taps 会指定保留一个特定频率范围的信号，过滤掉低于和高于该范围的部分。</p>
<p><strong>Taps</strong> (滤波器系数)：定义了 FIR（有限冲击响应）滤波器的系数，也就是滤波器的权重。通过调节 taps 参数，可以自定义滤波器的频率响应，优化接收到的信号并增强需要的信号分量。&#x3D;&#x3D;》由于BLE信号的<strong>频率</strong>较高（2.4 GHz），使用 Frequency Xlating FIR Filter 将信号频率转换到较低的范围是必要的。它也帮助去除来自其他频段的干扰，并使信号变得适合后续的解调处理。&#x3D;&#x3D;》此处设置为低通滤波器 (lowpass_filter)</p>
<p><strong>center frequency</strong> 参数用于定义滤波器的中心频率，也就是滤波器工作频带的中点。在 Frequency Xlating FIR Filter 中，center frequency 通过将接收到的信号的频谱平移到目标频段来帮助将信号移到适合解调的频段。</p>
<p>假设捕获到的信号频率为 2.4 GHz，center frequency 如果设置为 2.4 GHz，那么经过滤波后信号将被移到基带（或其他适当的频段）。<br>对于BLE信号，设置 center frequency 为目标频段中心（例如2.426 GHz），将捕获到的信号移到适合后续处理的频率范围，以便进行解调、解码等操作。</p>
<p>设置 center frequency 为 0 表示不进行频率平移处理，信号将直接经过滤波器的处理。这对于已经在适当频率范围内的信号是合适的，简化了信号处理流程，并且可以避免重复频率转换的操作。</p>
<h4 id="GFSK-Demod"><a href="#GFSK-Demod" class="headerlink" title="GFSK Demod"></a>GFSK Demod</h4><p>用于高斯频移键控（GFSK） 解调，因为BLE设备通常使用 GFSK 作为调制方式，该模块能够提取有效信号中的数据。它将接收到的频率变化转换为数字数据（例如0和1），这是解码BLE数据包的关键步骤。此模块是从物理层信号到数据流转换的重要环节。</p>
<p>Samples per Symbol（样本数）设置为10，Sensitivity &#x3D; 157.08 m较高的灵敏度设置能够提高解调器对弱信号的响应能力，这对于BLE信号尤其重要，因为BLE信号的<strong>功率</strong>（低功耗）较低且环境噪声较多。</p>
<h4 id="Unpacked-to-Packed"><a href="#Unpacked-to-Packed" class="headerlink" title="Unpacked to Packed"></a>Unpacked to Packed</h4><p>GFSK Demod模块输出的信号通常是未打包（Unpacked）的格式，其中每个数据位可能由多个样本表示。Unpacked to Packed 模块的作用是将这些未打包的比特流转换为打包格式（Packed）<br>转换成打包格式也就是将解调后的位流数据转换为字节流数据，可以更方便地与后续模块进行交互，方便后续的传输和分析。</p>
<h4 id="ZMQ-PUB-Sink"><a href="#ZMQ-PUB-Sink" class="headerlink" title="ZMQ PUB Sink"></a>ZMQ PUB Sink</h4><p>ZMQ PUB Sink 模块用于将数据发送到外部系统或应用程序。它通过 ZeroMQ 协议将打包的BLE数据（已解调并处理过）发布到网络中，供其他系统或模块订阅和使用。<br>数据传输：ZeroMQ 是一个高效的消息队列协议，支持高吞吐量、低延迟的数据传输。使用 ZMQ PUB Sink 可以将BLE数据流实时地传输给其他处理系统<br>灵活性与扩展性：ZeroMQ 提供了发布&#x2F;订阅机制，可以在不改变系统架构的情况下，方便地将数据分发到多个订阅者。<br>高效的通信：ZMQ 提供了非常快速且轻量级的通信，可以保证数据的实时性，尤其适用于需要高吞吐量和低延迟的无线信号捕获与分析任务。</p>

      </div>
      
        <div class="prev-or-next">
          <div class="post-foot-next">
            
              <a href="/2025/01/18/Netis%E8%B7%AF%E7%94%B1%E5%99%A8%E6%9C%AA%E6%8E%88%E6%9D%83RCE%E5%A4%8D%E7%8E%B0/" target="_self">
                <i class="iconfont icon-chevronleft"></i>
                <span>上一页</span>
              </a>
            
          </div>
          <div class="post-attach">
            <span class="post-pubtime">
              <i class="iconfont icon-updatetime mr-10" title="更新时间"></i>
              2025-01-31 19:47:13
            </span>
            
                  <span class="post-tags">
                    <i class="iconfont icon-tags mr-10" title="标签"></i>
                    
                    <span class="span--tag mr-8">
                      <a href="/tags/%E6%97%A0%E7%BA%BF%E7%94%B5/" title="无线电">
                        #无线电
                      </a>
                    </span>
                    
                  </span>
              
          </div>
          <div class="post-foot-prev">
            
              <a href="/2025/02/12/U%E7%9B%98%E8%B7%AF%E5%BE%84%E7%A9%BF%E8%B6%8A%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/" target="_self">
                <span>下一页</span>
                <i class="iconfont icon-chevronright"></i>
              </a>
            
          </div>
        </div>
      
    </div>
    
  <div id="btn-catalog" class="btn-catalog">
    <i class="iconfont icon-catalog"></i>
  </div>
  <div class="post-catalog hidden" id="catalog">
    <div class="title">目录</div>
    <div class="catalog-content">
      
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#GNU-Radio"><span class="toc-text">GNU Radio</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-text">简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E5%B0%8F%E7%BB%93%E5%AE%9E%E9%AA%8C%EF%BC%9AGNU-Radio-HackRF-%E5%AE%9E%E7%8E%B0FM%E6%94%B6%E9%9F%B3%E6%9C%BA"><span class="toc-text">基础小结实验：GNU Radio + HackRF 实现FM收音机</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E9%98%B6%EF%BC%9AZMQ"><span class="toc-text">进阶：ZMQ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E9%98%B6%E5%AE%9E%E9%AA%8C%EF%BC%9AGNU-Radio-HackRF%E6%8A%93%E7%A9%BA%E4%B8%ADBLE%E9%80%9A%E8%BF%87ZMQ%E8%BD%AC%E5%8F%91"><span class="toc-text">进阶实验：GNU Radio + HackRF抓空中BLE通过ZMQ转发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#GRC"><span class="toc-text">GRC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%A6%E7%BB%86%E9%85%8D%E7%BD%AE"><span class="toc-text">详细配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#RTL-SDR-Sorce"><span class="toc-text">RTL-SDR Sorce</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Head"><span class="toc-text">Head</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#File-Sink"><span class="toc-text">File Sink</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Simple-Squelch"><span class="toc-text">Simple Squelch</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Frequency-Xlating-FIR-Filter"><span class="toc-text">Frequency Xlating FIR Filter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GFSK-Demod"><span class="toc-text">GFSK Demod</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Unpacked-to-Packed"><span class="toc-text">Unpacked to Packed</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ZMQ-PUB-Sink"><span class="toc-text">ZMQ PUB Sink</span></a></li></ol></li></ol></li></ol></li></ol>
      
    </div>
  </div>

  
<script src="/js/catalog.js"></script>




    
      <div class="comments-container">
        







      </div>
    
  </div>


        
<div class="footer">
  <div class="social">
    <ul>
      
        <li>
          <a title="github" target="_blank" rel="noopener" href="https://github.com/zh-Closure">
            <i class="iconfont icon-github"></i>
          </a>
        </li>
      
    </ul>
  </div>
  
    
    <div class="footer-more">
      
        <a target="_blank" rel="noopener" href="https://github.com/zh-Closure">Copyright © 2025 Closure</a>
        
    </div>
  
    
    <div class="footer-more">
      
        <a target="_blank" rel="noopener" href="https://github.com/zh-Closure">email | 765003952@qq.com</a>
        
    </div>
  
  
    <div class="footer-views">
      
          本站总访问量<span id="busuanzi_value_site_pv"></span>次
        
      
      
          本站访客数<span id="busuanzi_value_site_uv"></span>人
        
      
    </div>
  
</div>

      </div>

      <div class="tools-bar">
        <div class="back-to-top tools-bar-item hidden">
  <a href="javascript: void(0)">
    <i class="iconfont icon-chevronup"></i>
  </a>
</div>


<script src="/js/backtotop.js"></script>



        
  <div class="search-icon tools-bar-item" id="search-icon">
    <a href="javascript: void(0)">
      <i class="iconfont icon-search"></i>
    </a>
  </div>

  <div class="search-overlay hidden">
    <div class="search-content" tabindex="0">
      <div class="search-title">
        <span class="search-icon-input">
          <a href="javascript: void(0)">
            <i class="iconfont icon-search"></i>
          </a>
        </span>
        
          <input type="text" class="search-input" id="search-input" placeholder="可露希尔大涨价……">
        
        <span class="search-close-icon" id="search-close-icon">
          <a href="javascript: void(0)">
            <i class="iconfont icon-close"></i>
          </a>
        </span>
      </div>
      <div class="search-result" id="search-result"></div>
    </div>
  </div>

  <script type="text/javascript">
    var inputArea = document.querySelector("#search-input")
    var searchOverlayArea = document.querySelector(".search-overlay")

    inputArea.onclick = function() {
      getSearchFile()
      this.onclick = null
    }

    inputArea.onkeydown = function() {
      if(event.keyCode == 13)
        return false
    }

    function openOrHideSearchContent() {
      let isHidden = searchOverlayArea.classList.contains('hidden')
      if (isHidden) {
        searchOverlayArea.classList.remove('hidden')
        document.body.classList.add('hidden')
        // inputArea.focus()
      } else {
        searchOverlayArea.classList.add('hidden')
        document.body.classList.remove('hidden')
      }
    }

    function blurSearchContent(e) {
      if (e.target === searchOverlayArea) {
        openOrHideSearchContent()
      }
    }

    document.querySelector("#search-icon").addEventListener("click", openOrHideSearchContent, false)
    document.querySelector("#search-close-icon").addEventListener("click", openOrHideSearchContent, false)
    searchOverlayArea.addEventListener("click", blurSearchContent, false)

    var searchFunc = function (path, search_id, content_id) {
      'use strict';
      var $input = document.getElementById(search_id);
      var $resultContent = document.getElementById(content_id);
      $resultContent.innerHTML = "<ul><span class='local-search-empty'>首次搜索，正在载入索引文件，请稍后……<span></ul>";
      $.ajax({
        // 0x01. load xml file
        url: path,
        dataType: "xml",
        success: function (xmlResponse) {
          // 0x02. parse xml file
          var datas = $("entry", xmlResponse).map(function () {
            return {
              title: $("title", this).text(),
              content: $("content", this).text(),
              url: $("url", this).text()
            };
          }).get();
          $resultContent.innerHTML = "";

          $input.addEventListener('input', function () {
            // 0x03. parse query to keywords list
            var str = '<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length <= 0) {
              return;
            }
            // 0x04. perform local searching
            datas.forEach(function (data) {
              var isMatch = true;
              var content_index = [];
              if (!data.title || data.title.trim() === '') {
                data.title = "Untitled";
              }
              var orig_data_title = data.title.trim();
              var data_title = orig_data_title.toLowerCase();
              var orig_data_content = data.content.trim().replace(/<[^>]+>/g, "");
              var data_content = orig_data_content.toLowerCase();
              var data_url = data.url;
              var index_title = -1;
              var index_content = -1;
              var first_occur = -1;
              // only match artiles with not empty contents
              if (data_content !== '') {
                keywords.forEach(function (keyword, i) {
                  index_title = data_title.indexOf(keyword);
                  index_content = data_content.indexOf(keyword);

                  if (index_title < 0 && index_content < 0) {
                    isMatch = false;
                  } else {
                    if (index_content < 0) {
                      index_content = 0;
                    }
                    if (i == 0) {
                      first_occur = index_content;
                    }
                    // content_index.push({index_content:index_content, keyword_len:keyword_len});
                  }
                });
              } else {
                isMatch = false;
              }
              // 0x05. show search results
              if (isMatch) {
                str += "<li><a href='" + data_url + "' class='search-result-title'>" + orig_data_title + "</a>";
                var content = orig_data_content;
                if (first_occur >= 0) {
                  // cut out 100 characters
                  var start = first_occur - 20;
                  var end = first_occur + 80;

                  if (start < 0) {
                    start = 0;
                  }

                  if (start == 0) {
                    end = 100;
                  }

                  if (end > content.length) {
                    end = content.length;
                  }

                  var match_content = content.substr(start, end);

                  // highlight all keywords
                  keywords.forEach(function (keyword) {
                    var regS = new RegExp(keyword, "gi");
                    match_content = match_content.replace(regS, "<span class=\"search-keyword\">" + keyword + "</span>");
                  });

                  str += "<p class=\"search-result-abstract\">" + match_content + "...</p>"
                }
                str += "</li>";
              }
            });
            str += "</ul>";
            if (str.indexOf('<li>') === -1) {
              return $resultContent.innerHTML = "<ul><span class='local-search-empty'>没有找到内容，请尝试更换检索词。<span></ul>";
            }
            $resultContent.innerHTML = str;
          });
        },
        error: function(xhr, status, error) {
          $resultContent.innerHTML = ""
          if (xhr.status === 404) {
            $resultContent.innerHTML = "<ul><span class='local-search-empty'>未找到search.xml文件，具体请参考：<a href='https://github.com/zchengsite/hexo-theme-oranges#configuration' target='_black'>configuration</a><span></ul>";
          } else {
            $resultContent.innerHTML = "<ul><span class='local-search-empty'>请求失败，尝试重新刷新页面或稍后重试。<span></ul>";
          }
        }
      });
      $(document).on('click', '#search-close-icon', function() {
        $('#search-input').val('');
        $('#search-result').html('');
      });
    }

    var getSearchFile = function() {
        var path = "/search.xml";
        searchFunc(path, 'search-input', 'search-result');
    }
  </script>




        
  <div class="tools-bar-item theme-icon" id="switch-color-scheme">
    <a href="javascript: void(0)">
      <i id="theme-icon" class="iconfont icon-moon"></i>
    </a>
  </div>

  
<script src="/js/colorscheme.js"></script>





        
  
    <div class="share-icon tools-bar-item">
      <a href="javascript: void(0)" id="share-icon">
        <i class="iconfont iconshare"></i>
      </a>
      <div class="share-content hidden">
        
          <a class="share-item" href="https://twitter.com/intent/tweet?text=' + GNU%20Radio + '&url=' + http%3A%2F%2Fexample.com%2F2025%2F01%2F31%2FGNU-Radio%2F + '" target="_blank" title="Twitter">
            <i class="iconfont icon-twitter"></i>
          </a>
        
        
          <a class="share-item" href="https://www.facebook.com/sharer.php?u=http://example.com/2025/01/31/GNU-Radio/" target="_blank" title="Facebook">
            <i class="iconfont icon-facebooksquare"></i>
          </a>
        
      </div>
    </div>
  
  
<script src="/js/shares.js"></script>



      </div>
    </div>
  </body>
</html>
